{"ast":null,"code":"var _jsxFileName = \"/Users/vishnuvamsithyejju/Downloads/Disaster_Management-master/client/src/components/Home/Quiz.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport customMarkerIconImage from '../../assets/home/mark.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction QuizSection() {\n  _s();\n\n  const [isSending, setIsSending] = useState(false);\n  const [showMapPopup, setShowMapPopup] = useState(false);\n  const [userLocation, setUserLocation] = useState(null);\n  const [nearbySafePlaces, setNearbySafePlaces] = useState([]);\n  const [emergencyType, setEmergencyType] = useState('General Emergency');\n\n  const handleEmergencyClick = () => {\n    setIsSending(true);\n    navigator.geolocation.getCurrentPosition(async position => {\n      const {\n        latitude,\n        longitude\n      } = position.coords;\n\n      try {\n        await axios.post('http://localhost:5002/emergency/Location', {\n          latitude,\n          longitude,\n          emergencyType\n        });\n        alert('Emergency alert sent successfully');\n      } catch (error) {\n        console.error('Error sending emergency alert:', error);\n        alert('Failed to send emergency alert');\n      } finally {\n        setIsSending(false);\n      }\n    }, error => {\n      console.error('Geolocation error:', error);\n      setIsSending(false);\n    });\n  };\n\n  const handleHelpRequest = () => {\n    setIsSending(true);\n    navigator.geolocation.getCurrentPosition(async position => {\n      const {\n        latitude,\n        longitude\n      } = position.coords;\n      setUserLocation({\n        latitude,\n        longitude\n      });\n\n      try {\n        const response = await axios.get('http://localhost:8086/alert/nearby-safe-places', {\n          params: {\n            userLat: latitude,\n            userLon: longitude\n          }\n        });\n        setNearbySafePlaces(response.data);\n        setShowMapPopup(true);\n      } catch (error) {\n        console.error('Error fetching nearby safe places:', error);\n        alert('Failed to fetch nearby safe places');\n      } finally {\n        setIsSending(false);\n      }\n    }, error => {\n      console.error('Geolocation error:', error);\n      setIsSending(false);\n    });\n  };\n\n  useEffect(() => {\n    let map;\n\n    if (showMapPopup && userLocation) {\n      map = L.map('map', {\n        center: [userLocation.latitude, userLocation.longitude],\n        zoom: 13\n      });\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        maxZoom: 19,\n        attribution: '© OpenStreetMap'\n      }).addTo(map);\n      nearbySafePlaces.forEach(place => {\n        L.marker([place.latitude, place.longitude], {\n          icon: new L.Icon({\n            iconUrl: customMarkerIconImage,\n            iconSize: [25, 41],\n            iconAnchor: [12, 41],\n            popupAnchor: [1, -34]\n          })\n        }).addTo(map).bindPopup(`<b>${place.Name}</b>`).openPopup();\n      });\n      return () => map.remove();\n    }\n  }, [showMapPopup, userLocation, nearbySafePlaces]);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"my-36\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-quiz-bg h-auto sm:bg-cover bg-center bg-no-repeat rounded-xl relative\",\n      children: [/*#__PURE__*/_jsxDEV(\"article\", {\n        className: \"py-24 md:px-14 px-4 md:w-9/12 md:mx-0 mx-auto md:text-left text-center leading-none\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"font-bold lg:text-[60px] text-[50px] text-white pb-8\",\n          children: \"Are you stuck in a helpless situation?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"capitalize bg-button-primary hover:bg-button-primary-hover transition-colors px-14 py-3 rounded-sm font-bold text-white mx-6\",\n          onClick: handleHelpRequest,\n          disabled: isSending,\n          children: \"Help\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"capitalize bg-button-primary hover:bg-button-primary-hover transition-colors px-14 py-3 rounded-sm font-bold text-white\",\n          onClick: handleEmergencyClick,\n          disabled: isSending,\n          children: \"Emergency\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), showMapPopup && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white p-10 rounded-lg shadow-lg relative\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowMapPopup(false),\n            className: \"absolute top-0 right-0 p-2\",\n            children: \"X\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"map\",\n            style: {\n              height: '400px',\n              width: '500px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n}\n\n_s(QuizSection, \"+yP4wgO1/EVtzEsaor0lbAu4a5w=\");\n\n_c = QuizSection;\nexport default QuizSection;\n\nvar _c;\n\n$RefreshReg$(_c, \"QuizSection\");","map":{"version":3,"sources":["/Users/vishnuvamsithyejju/Downloads/Disaster_Management-master/client/src/components/Home/Quiz.jsx"],"names":["React","useState","useEffect","axios","L","customMarkerIconImage","QuizSection","isSending","setIsSending","showMapPopup","setShowMapPopup","userLocation","setUserLocation","nearbySafePlaces","setNearbySafePlaces","emergencyType","setEmergencyType","handleEmergencyClick","navigator","geolocation","getCurrentPosition","position","latitude","longitude","coords","post","alert","error","console","handleHelpRequest","response","get","params","userLat","userLon","data","map","center","zoom","tileLayer","maxZoom","attribution","addTo","forEach","place","marker","icon","Icon","iconUrl","iconSize","iconAnchor","popupAnchor","bindPopup","Name","openPopup","remove","height","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport customMarkerIconImage from '../../assets/home/mark.png';\n\nfunction QuizSection() {\n  const [isSending, setIsSending] = useState(false);\n  const [showMapPopup, setShowMapPopup] = useState(false);\n  const [userLocation, setUserLocation] = useState(null);\n  const [nearbySafePlaces, setNearbySafePlaces] = useState([]);\n  const [emergencyType, setEmergencyType] = useState('General Emergency');\n\n  const handleEmergencyClick = () => {\n    setIsSending(true);\n    navigator.geolocation.getCurrentPosition(async (position) => {\n      const { latitude, longitude } = position.coords;\n      try {\n        await axios.post('http://localhost:5002/emergency/Location', {\n          latitude,\n          longitude,\n          emergencyType,\n        });\n        alert('Emergency alert sent successfully');\n      } catch (error) {\n        console.error('Error sending emergency alert:', error);\n        alert('Failed to send emergency alert');\n      } finally {\n        setIsSending(false);\n      }\n    }, (error) => {\n      console.error('Geolocation error:', error);\n      setIsSending(false);\n    });\n  };\n\n  const handleHelpRequest = () => {\n    setIsSending(true);\n    navigator.geolocation.getCurrentPosition(async (position) => {\n      const { latitude, longitude } = position.coords;\n      setUserLocation({ latitude, longitude });\n      try {\n        const response = await axios.get('http://localhost:8086/alert/nearby-safe-places', {\n          params: { userLat: latitude, userLon: longitude }\n        });\n        setNearbySafePlaces(response.data);\n        setShowMapPopup(true);\n      } catch (error) {\n        console.error('Error fetching nearby safe places:', error);\n        alert('Failed to fetch nearby safe places');\n      } finally {\n        setIsSending(false);\n      }\n    }, (error) => {\n      console.error('Geolocation error:', error);\n      setIsSending(false);\n    });\n  };\n\n  useEffect(() => {\n    let map;\n\n    if (showMapPopup && userLocation) {\n      map = L.map('map', {\n        center: [userLocation.latitude, userLocation.longitude],\n        zoom: 13,\n      });\n\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        maxZoom: 19,\n        attribution: '© OpenStreetMap'\n      }).addTo(map);\n\n      nearbySafePlaces.forEach(place => {\n        L.marker([place.latitude, place.longitude], {\n          icon: new L.Icon({\n            iconUrl: customMarkerIconImage,\n            iconSize: [25, 41],\n            iconAnchor: [12, 41],\n            popupAnchor: [1, -34]\n          })\n        }).addTo(map)\n        .bindPopup(`<b>${place.Name}</b>`)\n        .openPopup();\n      });\n\n      return () => map.remove();\n    }\n  }, [showMapPopup, userLocation, nearbySafePlaces]);\n\n  return (\n    <section className=\"my-36\">\n      <div className=\"bg-quiz-bg h-auto sm:bg-cover bg-center bg-no-repeat rounded-xl relative\">\n        <article className=\"py-24 md:px-14 px-4 md:w-9/12 md:mx-0 mx-auto md:text-left text-center leading-none\">\n          <h1 className=\"font-bold lg:text-[60px] text-[50px] text-white pb-8\">\n            Are you stuck in a helpless situation?\n          </h1>\n          <button className=\"capitalize bg-button-primary hover:bg-button-primary-hover transition-colors px-14 py-3 rounded-sm font-bold text-white mx-6\"\n                  onClick={handleHelpRequest} disabled={isSending}>\n            Help\n          </button>\n          <button className=\"capitalize bg-button-primary hover:bg-button-primary-hover transition-colors px-14 py-3 rounded-sm font-bold text-white\"\n                  onClick={handleEmergencyClick} disabled={isSending}>\n            Emergency\n          </button>\n        </article>\n        {showMapPopup && (\n          <div className=\"absolute inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center\">\n            <div className=\"bg-white p-10 rounded-lg shadow-lg relative\">\n              <button onClick={() => setShowMapPopup(false)} className=\"absolute top-0 right-0 p-2\">X</button>\n              <div id=\"map\" style={{ height: '400px', width: '500px' }}></div>\n            </div>\n          </div>\n        )}\n      </div>\n    </section>\n  );\n}\n\nexport default QuizSection;\n"]},"metadata":{},"sourceType":"module"}